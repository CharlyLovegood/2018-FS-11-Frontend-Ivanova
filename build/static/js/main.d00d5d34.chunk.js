(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{17:function(e,t,n){e.exports={Input:"Input_Input__2xMlR",Label:"Input_Label__3l4yv",InputElement:"Input_InputElement__1y8UJ",Invalid:"Input_Invalid__212nL"}},32:function(e,t,n){e.exports={Content:"Layout_Content__HjMgi"}},33:function(e,t,n){e.exports={TaskList:"Tasks_TaskList__2xUbZ"}},34:function(e,t,n){e.exports={TaskContainer:"Task_TaskContainer__12xRn"}},38:function(e,t,n){},40:function(e,t,n){e.exports=n(77)},45:function(e,t,n){},77:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(31),l=n.n(r),i=(n(45),n(7)),c=n(8),u=n(11),s=n(9),h=n(12),m=function(e){return e.children},d=n(32),p=n.n(d),g=n(78),f=function(){return o.a.createElement("ul",null,o.a.createElement("li",null,o.a.createElement(g.a,{to:""},"\u0413\u043b\u0430\u0432\u043d\u0430\u044f")),o.a.createElement("li",null,o.a.createElement(g.a,{to:"/task"},"\u0417\u0430\u0434\u0430\u0447\u0438")),o.a.createElement("li",null,o.a.createElement(g.a,{to:"/about"},"\u041e \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u0438")),o.a.createElement("li",null,o.a.createElement(g.a,{to:"/login"},"\u0412\u043e\u0439\u0442\u0438")))},v=function(e){var t=e.children;return o.a.createElement(m,null,o.a.createElement(f,null),o.a.createElement("main",{className:p.a.Content},t))},E=n(16),b=n(33),k=n.n(b),y=n(34),j=n.n(y),O=n(83),S=Object(O.a)(function(e){var t=e.task,n=e.changeTaskStatus,a=e.match;return o.a.createElement("div",{className:j.a.TaskContainer},o.a.createElement("input",{id:t.id,onChange:n,type:"checkbox",value:t.isFinished}),o.a.createElement("label",{htmlFor:t.id},o.a.createElement("div",null,t.text)),o.a.createElement(g.a,{to:"".concat(a.path,"/").concat(t.id)},"\u041a \u0437\u0430\u0434\u0430\u0447\u0435"))}),C=function(e){console.log(e);var t=e.tasks.map(function(t){return o.a.createElement(S,{key:t.id,task:t,changeTaskStatus:function(){return e.changeTaskStatus(t.id,t)}})});return o.a.createElement("div",{className:k.a.TaskList},t)},_=n(79),w=function(e){return o.a.createElement("div",null,"ID \u0437\u0430\u0434\u0430\u0447\u0438 - ",e.match.params.id)},T=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(u.a)(this,Object(s.a)(t).call(this,e))).state={tasks:t.createTasks()},n.changeTaskStatus=function(e){var t=n.state.tasks.findIndex(function(t){return t.id===e}),a=Object(E.a)(n.state.tasks);a[t].isFinished=!a[t].isFinished,n.setState({tasks:a}),console.log(a)},n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return console.log(this.props),o.a.createElement("div",null,o.a.createElement(C,{tasks:this.state.tasks,changeTaskStatus:function(t,n){return e.changeTaskStatus(t,n)}}),o.a.createElement(_.a,{path:"/task/:id",exact:!0,component:w}))}}],[{key:"createTasks",value:function(){return new Array(15).fill(null).map(function(e,t){return{id:t,isFinished:!1,text:"\u041d\u043e\u0432\u0430\u044f \u0437\u0430\u0434\u0430\u0447\u0430 ".concat(t)}})}}]),t}(a.Component),A=n(82),U=n(81),I=n(80),R=n(6),F=n(17),x=n.n(F),D=function(e){var t,n=[x.a.InputElement];switch(e.invalid&&e.touched&&n.push(x.a.Invalid),e.elementType){case"input":t=o.a.createElement("input",Object.assign({className:n.join(" "),value:e.value,onChange:e.changed},e.elementConfig));break;case"textarea":t=o.a.createElement("textarea",{placeholder:e.placeholder});break;default:t=o.a.createElement("input",Object.assign({className:n.join(" "),value:e.value,onChange:e.changed},e.elementConfig))}return o.a.createElement("div",{className:x.a.Input},o.a.createElement("div",{className:x.a.Label}," ",e.label," "),t)},M=n(10),L=n(24),N=n.n(L);N.a.interceptors.response.use(function(e){return e},function(e){return Promise.resolve({data:{token:"sdfsdfsef34234wefsdf234"},status:200,statusText:"Ok",header:{},config:e.config})});var G=function(e){return{type:"AUTH_SUCCESS",token:e}},H=0,P=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(u.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(o)))).state={loginForm:{login:{label:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043b\u043e\u0433\u0438\u043d",elementType:"input",elementConfig:{type:"text",placeholder:"\u041b\u043e\u0433\u0438\u043d"},value:"",valid:!1,touched:!1,validation:{isRequired:!0,minLength:6}},password:{elementType:"input",value:"",label:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c",elementConfig:{type:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c"},touched:!1,valid:!1,validation:{isRequired:!0}}},valid:!1},n.handleFormConfirm=function(e){e.preventDefault();var t=Object.keys(n.state.loginForm).reduce(function(e,t){return e[t]=n.state.loginForm[t].value,e},{});console.log(t),n.props.onAuth(t.login,t.password)},n.checkValidity=function(e,t){var n=!0;return t.isRequired&&(n=""!==e.trim()),t.minLength&&(n=e.trim().length>=t.minLength&&n),n},n.handleInput=function(e,t){var a=Object(R.a)({},n.state.loginForm),o=Object(R.a)({},n.state.loginForm[t]);o.touched=!0,o.value=e.target.value,o.valid=n.checkValidity(o.value,o.validation);var r=Object.keys(a).some(function(e){return!a[e].valid});a[t]=o,n.setState({loginForm:a,valid:!r})},n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=Object.keys(this.state.loginForm).map(function(t){var n=e.state.loginForm[t];return o.a.createElement(D,{key:t,elementType:n.elementType,elementConfig:n.elementConfig,value:n.value,valid:n.valid,label:n.label,touched:n.touched,invalid:!n.valid,changed:function(n){return e.handleInput(n,t)}})}),n=null;return this.props.token&&(n=o.a.createElement(U.a,{to:"/about"})),this.props.error,o.a.createElement("form",{onSubmit:this.handleFormConfirm},t,o.a.createElement("button",{disabled:!this.state.valid,type:"submit"},"\u0412\u043e\u0439\u0442\u0438"),this.props.token,n)}}]),t}(a.Component),q=Object(M.b)(function(e){return{token:e.auth.token}},function(e){return{onAuth:function(t,n){return e(function(e,t){return function(n){n({type:"AUTH_START"});var a=new Request("http://127.0.0.1:5000/",{method:"GET",headers:{"Access-Control-Allow-Origin":"*"}});fetch(a).then(function(e){return console.log(e)}),N.a.post("/auth",{login:e,password:t}).then(function(e){console.log(e),localStorage.setItem("token",e.data.token),n(G(e.data.token))}).catch(function(e){n({type:"AUTH_FAILED",error:e})})}}(t,n))}}})(P),B=function(e){return o.a.createElement("p",{className:"Me"},o.a.createElement("i",null,e.author),e.message,o.a.createElement("img",{src:e.url}))},V=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(u.a)(this,Object(s.a)(t).call(this,e))).state={data:[],user:0},n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=new Request("http://127.0.0.1:5000/search_users/",{method:"GET",headers:{"Access-Control-Allow-Origin":"*"}});fetch(t).then(function(e){return e.json()}).then(function(t){return e.setState({data:t})});var n=new Request("http://127.0.0.1:5000/logut/",{method:"GET",headers:{"Access-Control-Allow-Origin":"*"}});console.log(n),fetch(n).then(function(e){return e.json()}).then(function(t){return e.props.currentUser(t,"Charlie",!0)})}},{key:"render",value:function(){return console.log(this.state.data),o.a.createElement("section",{id:"messages-list"},o.a.createElement("p",null,o.a.createElement("i",null,"Jack1"),"Hello, friend!",this.state.data.map(function(e){return e}),"9",this.props.usr.currentUser.userName,"9"),o.a.createElement("ul",null,this.props.msg.messages?this.props.msg.messages.map(function(e){return o.a.createElement(B,Object.assign({key:e.id},e))}):console.log("jjh")))}}]),t}(a.Component),J=Object(M.b)(function(e){return{msg:e.msg,usr:e.usr}},function(e){return{currentUser:function(t,n,a){return e(function(e,t,n){return{type:"CURRENT_USER",payload:{id:e,userName:t,isAuthorized:n}}}(t,n,a))}}})(V),W=n(38),X=n.n(W),z=function(e){X.a.InputElement;return o.a.createElement("section",{id:"new-message"},o.a.createElement("input",{onChange:e.handleChange,onSubmit:e.handleSubmit,type:"text",value:e.value}),o.a.createElement("button",{id:"submit",onClick:e.handleSubmit},o.a.createElement("img",{alt:"",className:"imgButton",src:"https://image.flaticon.com/icons/svg/87/87413.svg"})),o.a.createElement("button",null,o.a.createElement("label",{htmlFor:"attach",className:"imgButton"},o.a.createElement("img",{alt:"",className:"imgButton",src:"https://image.flaticon.com/icons/svg/149/149827.svg"}))),o.a.createElement("input",{type:"file",style:{display:"none"},onChange:e.handleFileUpload,id:"attach"}),o.a.createElement("button",{id:"geoposition",onClick:e.handleGeoposition},o.a.createElement("img",{alt:"",className:"imgButton",src:"https://image.flaticon.com/icons/svg/69/69433.svg"})))},Z=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(u.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(o)))).state={value:""},n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"handleChange",value:function(e){console.log(e.target.value),this.setState({value:e.target.value})}},{key:"readFile",value:function(e){var t=new FileReader;return new Promise(function(n,a){t.onload=function(e){var t=e.target.result;n(t)},t.onerror=function(){return a("\u041e\u0448\u0438\u0431\u043a\u0430 \u0447\u0442\u0435\u043d\u0438\u044f \u0444\u0430\u0439\u043b\u0430")},t.readAsDataURL(e)})}},{key:"handleSubmit",value:function(e){console.log("submit"),e.preventDefault(),console.log(this.state.value),""!==this.state.value&&(console.log(this.state.value),this.props.AddMessage(this.state.value,"Me","text",null),this.setState({value:""}))}},{key:"fileUpload",value:function(e){var t=this;return new Promise(function(n,a){e.preventDefault();var o=new FileReader,r=e.target.files[0];o.readAsDataURL(r);(new Date).toDateString();var l=r.name.split(".").pop().toLowerCase();console.log("hhh"),"png"===l||"jpg"===l?t.readFile(r).then(function(e){console.log("jpg"),console.log(e),n(e)}):n(r.name)})}},{key:"handleFileUpload",value:function(e){var t=this;this.fileUpload(e).then(function(e){console.log(e),e.length>1e3?t.props.AddMessage("","Me","img",e):t.props.AddMessage(e,"Me","text",null)})}},{key:"geoposition",value:function(){function e(){alert("Error: Position hasn`t been detected")}return new Promise(function(n,a){navigator.geolocation.getCurrentPosition(n,e,t)});var t}},{key:"handleGeoposition",value:function(){var e=this;console.log("geo"),this.geoposition().then(function(t){console.log(t),e.props.AddMessage("My latitude is "+t.coords.latitude,"Me",null,null)})}},{key:"render",value:function(){var e=this;return o.a.createElement(z,{value:this.state.value,handleSubmit:function(t){return e.handleSubmit(t)},handleFileUpload:function(t){return e.handleFileUpload(t)},handleGeoposition:function(t){return e.handleGeoposition(t)},handleChange:function(t){return e.handleChange(t)}})}}]),t}(a.Component),$=Object(M.b)(function(e){return{}},function(e){return{AddMessage:function(t,n,a,o){return e(function(e,t,n,a){return{type:"ADD_MESSAGE",payload:{id:H++,message:e,author:t,filename:n,url:a}}}(t,n,a,o))}}})(Z),K=function(){return o.a.createElement("div",null,"AboutPage")},Q=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){o.a.createElement(A.a,null,o.a.createElement(_.a,{path:"/about",exact:!0,component:K}),o.a.createElement(_.a,{path:"/login",exact:!0,component:q}),o.a.createElement(U.a,{to:"/about"}));return this.props.token&&o.a.createElement(A.a,null,o.a.createElement(_.a,{path:"/task",component:T}),o.a.createElement(_.a,{path:"/login",exact:!0,component:q}),o.a.createElement(_.a,{path:"/about",exact:!0,component:K}),o.a.createElement(U.a,{to:"/about"})),o.a.createElement(I.a,null,o.a.createElement(v,null,o.a.createElement(J,null),o.a.createElement($,null)))}}]),t}(a.Component),Y=Object(M.b)(function(e){return{token:e.auth.token}},function(e){return{checkToken:function(){return e(function(e){var t=localStorage.getItem("token");t&&e(G(t))})}}})(Q);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ee=n(15),te={token:null,error:null,loading:!1},ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"AUTH_START":return function(e,t){return Object(R.a)({},e,{loading:!0,error:null})}(e);case"AUTH_SUCCESS":return function(e,t){return Object(R.a)({},e,{token:t.token,error:null,loading:!1})}(e,t);case"AUTH_FAILED":return function(e,t){return Object(R.a)({},e,{error:t.error,loading:!1})}(e,t);default:return e}},ae={messages:[]},oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_MESSAGE":case"MESSAGE_RECEIVED":return Object(R.a)({},e,{messages:Object(E.a)(e.messages).concat([t.payload])});default:return e}},re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ae,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_MESSAGE":case"MESSAGE_RECEIVED":return oe(e,t);default:return e}},le={users:[],currentUser:[]},ie=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:le,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USERS_LIST":return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USERS_LIST":return Object(R.a)({},e,{users:Object(E.a)(e.users).concat([t.payload])});default:return e}}(e,t);case"CURRENT_USER":return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(console.log("hjadh"),t.type){case"CURRENT_USER":return console.log("here"),Object(R.a)({},e,{currentUser:t.payload});default:return e}}(e,t);default:return e}},ce=n(39),ue=Object(ee.c)({auth:ne,msg:re,usr:ie}),se=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||ee.d,he=Object(ee.e)(ue,se(Object(ee.a)(ce.a)));l.a.render(o.a.createElement(M.a,{store:he},o.a.createElement(Y,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[40,2,1]]]);
//# sourceMappingURL=main.d00d5d34.chunk.js.map